<!DOCTYPE html><html lang="en" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="m_functions.py" /><meta property="og:locale" content="en" /><meta name="description" content=" m_functions.py  Return 路 GitHub" /><meta property="og:description" content=" m_functions.py  Return 路 GitHub" /><link rel="canonical" href="https://cartex10.github.io/posts/m_functions/" /><meta property="og:url" content="https://cartex10.github.io/posts/m_functions/" /><meta property="og:site_name" content="Cartex10" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-02-13T00:00:00-05:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="m_functions.py" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-02-13T00:00:00-05:00","datePublished":"2022-02-13T00:00:00-05:00","description":" m_functions.py  Return 路 GitHub","headline":"m_functions.py","mainEntityOfPage":{"@type":"WebPage","@id":"https://cartex10.github.io/posts/m_functions/"},"url":"https://cartex10.github.io/posts/m_functions/"}</script><title>m_functions.py | Cartex10</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Cartex10"><meta name="application-name" content="Cartex10"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" /assets/deidara1.png " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Cartex10</a></div><div class="site-subtitle font-italic">Programmer / Tinkerer</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about-me/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT ME</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="" aria-label="" target="_blank" rel="noopener"> <i class=""></i> </a> <a href="https://github.com/Cartex10" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['cartex10','bu.edu'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>m_functions.py</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>m_functions.py</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/cartex10">Carlos Ortiz</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" data-ts="1644728400" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-02-13 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="598 words"> <em>3 min</em> read</span></div></div></div><div class="post-content"><div align="center"><h1>  m_functions.py </h1><h4> <a href="../minibot">Return</a> <span> 路 </span> <a href="https://github.com/cartex10/MiniBot">GitHub</a></h4></div><h2 id="file-overview"><span class="mr-2">File Overview</span><a href="#file-overview" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><h5> This file stores all of the functions that MiniBot needs to successfully function. The only non default libraries called are the Discord.py library, and sqlite3 which is used for connecting and maintaining MiniBot's database. There are also two Discord Views in this file, which are the classes used by MiniBot to create the menus used to modify it's database through UI instead of code.</h5><h2 id="class-timer"><span class="mr-2">class Timer</span><a href="#class-timer" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p><img data-src="/assets/minibot/m_functions/mf1.png" data-proofer-ignore></p><h5> This class is super necessary to run, and simple to explain, as the Timer class is the class that instantiates all of the timers MiniBot requires to send its reminders and updates. As inputs, the timer class takes the time until the timer runs, the task it will complete when it does, and any necessary arguments for the task.</h5><h2 id="class-reminderview"><span class="mr-2">class reminderView</span><a href="#class-reminderview" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p><img data-src="/assets/minibot/m_functions/mf2.png" data-proofer-ignore></p><h5> The reminderView class handles the UI for adding any new reminders. The user can use MiniBot to add or remove reminders of two different priorities</h5><h2 id="class-messageview"><span class="mr-2">class messageView</span><a href="#class-messageview" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p><img data-src="/assets/minibot/m_functions/mf3.png" data-proofer-ignore></p><h5> The messageView class is very similar to the reminderView class, as they are both menus for adding text to the database. In this menu, the user can add or remove message templates of varying types that are used in varying amounts.</h5><h2 id="class-textenum"><span class="mr-2">class textEnum</span><a href="#class-textenum" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p><img data-src="/assets/minibot/m_functions/mf4.png" data-proofer-ignore></p><h5> This is a very simple enum used mainly by messageView and constructMessage() to keep track of the varying types of messages/templates</h5><h2 id="notify_timer"><span class="mr-2">notify_timer()</span><a href="#notify_timer" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p><img data-src="/assets/minibot/m_functions/mf5.png" data-proofer-ignore></p><h5> This function is run after the first timer set by MiniBot completes, where it completes its function and runs the next timer for itself. The timer uses most of the global variables from m_vars.py to randomly send either a lower priority reminder, a personality message, or nothing. If nothing has been sent for too long, MiniBot will send a higher priority reminder.</h5><h2 id="manga_timer"><span class="mr-2">manga_timer()</span><a href="#manga_timer" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p><img data-src="/assets/minibot/m_functions/mf6.png" data-proofer-ignore></p><h5> This function works similarly to notify_timer(), but instead of sending reminders, this timer checks whether any manga in a specific MangaList on MangaDex has been updated. After comparing the list to the manga in its database, MiniBot sends a message to notify the user or removes the manga from its database if a manga has been updated or removed from the MangaList respectively.</h5><h2 id="getnewestchapter"><span class="mr-2">getNewestChapter()</span><a href="#getnewestchapter" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p><img data-src="/assets/minibot/m_functions/mf7.png" data-proofer-ignore></p><h5> This function sends a request to the mangadex api, and returns the newest chapter number of the specified manga</h5><h2 id="getmangainfo"><span class="mr-2">getMangaInfo()</span><a href="#getmangainfo" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p><img data-src="/assets/minibot/m_functions/mf8.png" data-proofer-ignore></p><h5> This function is called whenever manga_timer() finds a new chapter for a manga. MiniBot uses this function to get the title and the cover for the message it will send in `#manga-updates`</h5><h2 id="constructmessage"><span class="mr-2">constructMessage()</span><a href="#constructmessage" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p><img data-src="/assets/minibot/m_functions/mf9.png" data-proofer-ignore></p><h5> This simple function is called by both timers, and uses getRandomMessage() to add any greeting to any message template to construct the message that will be sent to the user</h5><h2 id="checkconnection"><span class="mr-2">checkConnection()</span><a href="#checkconnection" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p><img data-src="/assets/minibot/m_functions/mf10.png" data-proofer-ignore></p><h5> This function is run only once immediately once MiniBot is ready, and checks whether there is a m_db.db file. If there is, MiniBot checks whether all of the necessary tables are built and correct, and builds them if they are not. Then, MiniBot sets the connection to a global variable to be used by any function.</h5><h2 id="adddeletereminder-getcountreminders"><span class="mr-2">add/deleteReminder() get/countReminders()</span><a href="#adddeletereminder-getcountreminders" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p><img data-src="/assets/minibot/m_functions/mf11.png" data-proofer-ignore></p><h5> These four functions are extremely simple, as they add or remove reminders from the database, returns all reminders of a specific priority, or returns the amount of reminders in the database respectively</h5><h2 id="addremovefindeditgetmanga"><span class="mr-2">add/remove/find/edit/getManga()</span><a href="#addremovefindeditgetmanga" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p><img data-src="/assets/minibot/m_functions/mf12.png" data-proofer-ignore></p><h5> These functions are all called within manga_timer(), and are the functions used by MiniBot to maintain its database</h5><h2 id="getrandommessage"><span class="mr-2">getRandomMessage()</span><a href="#getrandommessage" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p><img data-src="/assets/minibot/m_functions/mf13.png" data-proofer-ignore></p><h5> This message returns a random notification from MiniBot's database with a specific priority. It is used mainly in notify_timer() to get the notification to be send to the user</h5><h2 id="adddeletemessage--getmessages"><span class="mr-2">add/deleteMessage() / getMessages()</span><a href="#adddeletemessage--getmessages" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p><img data-src="/assets/minibot/m_functions/mf14.png" data-proofer-ignore></p><h5> These functions are all called by messageView, and they are how MiniBot maintains its message template database</h5><div align="center"> <a href="../minibot">Return</a></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/current-projects/'>Current Projects</a>, <a href='/categories/minibot/'>MiniBot</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/minibot/" class="post-tag no-text-decoration" >minibot</a> <a href="/tags/current-projects/" class="post-tag no-text-decoration" >current-projects</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=m_functions.py - Cartex10&amp;url=https://cartex10.github.io/posts/m_functions/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=m_functions.py - Cartex10&amp;u=https://cartex10.github.io/posts/m_functions/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https://cartex10.github.io/posts/m_functions/&amp;text=m_functions.py - Cartex10" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Welcome/">Welcome to my Site!</a><li><a href="/posts/fightboard-v2/">FightBoard v2</a><li><a href="/posts/vetcon/">VETCON Badge</a><li><a href="/posts/fightboard-v1/">FightBoard v1</a><li><a href="/posts/minibot/">MiniBot</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/current-projects/">current-projects</a> <a class="post-tag" href="/tags/previous-projects/">previous-projects</a> <a class="post-tag" href="/tags/rotombot/">rotombot</a> <a class="post-tag" href="/tags/fightboard/">fightboard</a> <a class="post-tag" href="/tags/minibot/">minibot</a> <a class="post-tag" href="/tags/blog-posts/">blog-posts</a> <a class="post-tag" href="/tags/important/">important</a> <a class="post-tag" href="/tags/overviews/">overviews</a> <a class="post-tag" href="/tags/robodachi/">robodachi</a> <a class="post-tag" href="/tags/vetcon-badge/">vetcon-badge</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/minibot/"><div class="card-body"> <em class="timeago small" data-ts="1644728400" > 2022-02-13 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>MiniBot</h3><div class="text-muted small"><p>  MiniBot  GitHub 路 Project Logs Feb 2022 - Overview MiniBot was born out of a purpose. That purpose is to help me remember to do all of the little things I need to do in order ...</p></div></div></a></div><div class="card"> <a href="/posts/robodachi/"><div class="card-body"> <em class="timeago small" data-ts="1652673600" > 2022-05-16 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>RoboDachi</h3><div class="text-muted small"><p>  RoboDachi  GitHub (private) 路 Project Logs MAY 2022 - Overview This is a project that I&#39;ve been planning for a while now, and incorporates all of what I&#39;ve learned over the la...</p></div></div></a></div><div class="card"> <a href="/posts/fightboard-v1/"><div class="card-body"> <em class="timeago small" data-ts="1666584000" > 2022-10-24 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>FightBoard v1</h3><div class="text-muted small"><p> 锔 FightBoard v1  GitHub 路 Project Logs AUG 2022 - SEPT 2022 Overview The FightBoard is a completely custom mechanical keyboard running QMK firmware, built mainly for use with Fi...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/rotombot/" class="btn btn-outline-primary" prompt="Older"><p>RotomBot</p></a> <a href="/posts/minibot/" class="btn btn-outline-primary" prompt="Newer"><p>MiniBot</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> 漏 2025 <a href="https://github.com/cartex10">Carlos Ortiz</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/current-projects/">current-projects</a> <a class="post-tag" href="/tags/previous-projects/">previous-projects</a> <a class="post-tag" href="/tags/rotombot/">rotombot</a> <a class="post-tag" href="/tags/fightboard/">fightboard</a> <a class="post-tag" href="/tags/minibot/">minibot</a> <a class="post-tag" href="/tags/blog-posts/">blog-posts</a> <a class="post-tag" href="/tags/important/">important</a> <a class="post-tag" href="/tags/overviews/">overviews</a> <a class="post-tag" href="/tags/robodachi/">robodachi</a> <a class="post-tag" href="/tags/vetcon-badge/">vetcon-badge</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
