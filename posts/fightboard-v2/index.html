<!DOCTYPE html><html lang="en" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="FightBoard v2" /><meta property="og:locale" content="en" /><meta name="description" content="⌨️ FightBoard v2 🎮 GitHub · Project Logs NOV 2022 - JAN 2023 No video support." /><meta property="og:description" content="⌨️ FightBoard v2 🎮 GitHub · Project Logs NOV 2022 - JAN 2023 No video support." /><link rel="canonical" href="https://cartex10.github.io/posts/fightboard-v2/" /><meta property="og:url" content="https://cartex10.github.io/posts/fightboard-v2/" /><meta property="og:site_name" content="Cartex10" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-02-27T00:00:00-05:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="FightBoard v2" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-03-14T15:46:26-04:00","datePublished":"2023-02-27T00:00:00-05:00","description":"⌨️ FightBoard v2 🎮 GitHub · Project Logs NOV 2022 - JAN 2023 No video support.","headline":"FightBoard v2","mainEntityOfPage":{"@type":"WebPage","@id":"https://cartex10.github.io/posts/fightboard-v2/"},"url":"https://cartex10.github.io/posts/fightboard-v2/"}</script><title>FightBoard v2 | Cartex10</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Cartex10"><meta name="application-name" content="Cartex10"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" /assets/deidara1.png " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Cartex10</a></div><div class="site-subtitle font-italic">Programmer / Tinkerer</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about-me/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT ME</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="" aria-label="" target="_blank" rel="noopener"> <i class=""></i> </a> <a href="https://github.com/Cartex10" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['cartex10','bu.edu'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>FightBoard v2</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>FightBoard v2</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/cartex10">Carlos Ortiz</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" data-ts="1677474000" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2023-02-27 </em> </span> <span> Updated <em class="timeago" data-ts="1741981586" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2025-03-14 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="873 words"> <em>4 min</em> read</span></div></div></div><div class="post-content"><div align="center"><h1> ⌨️ FightBoard v2 🎮</h1><h4> <a href="https://github.com/cartex10/fightboard">GitHub</a> <span> · </span> <a href="/categories/fightboard">Project Logs</a></h4><h4> NOV 2022 - JAN 2023</h4><p><video controls="" autoplay="" loop="" width="800" height="600"> <source src="/assets/fightboard/IMG_4355.mov" type="video/mp4" /> No video support. </video></p></div><h2 id="overview"><span class="mr-2">Overview</span><a href="#overview" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><h5> While v1 was a small step into keyboard design, v2 is a giant leap for an upgrade! Not only is v2 about a third the size of v1, but it now includes customizable LED functions, switchable layers, EEPROM storage for remembering states after power loss, and an extra button to customize functions on the fly. Since this is an upgrade, the specs are the same of those of <a href="https://cartex10.github.io/posts/fightboard-v1/#overview">v1</a> (written in C using QMK firmware, PCB designed in KiCAD, XIAO RP2040) with the figuratively massive change from a throughhole MCP23018 to a literally miniscule surface mount I/O expander. v2 also uses 13 SK6812-MINI LEDs, a TXB0108 level shifter, and a new (custom) keyswitch footprint that allows for soldering on either MX Cherry or Choc hotswap sockets. All of this was worked on during November and December of last year, while the case seen above was mainly worked on in January.</h5><h2 id="project-purpose"><span class="mr-2">Project Purpose</span><a href="#project-purpose" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><h5> This project is the direct upgrade to v1, and some of the features had been planned even before v1 was finished. The main obstacle was the LED circuitry, as not only do they more than double the complexity of the circuit design, but they require 5V for power, which the RP2040 has issues supplying, but can be solved by adding a level shifter to the circuit.</h5><h5> Once these issues were solved, the main philosophy of the PCB design was to reduce the overall size, as v2 is meant to be a portable controller. The first step of this was to change component model, as the MCP23018-E/SP was the largest component on the previous design, so I swapped to the E/SS model, which is not only surface mount, but about one fourth of the size. This came with an issue though: the leads were so small, the PCB manufacturer told me they could not place the solder bridge for the part! Luckily, soldering was still possible, just slightly more complicated, so no changes to the design needed to be made.</h5><p><img data-src="/assets/fightboard/v2_back.jpg" height="2" data-proofer-ignore></p><h5> Speaking of component footprints, in order to fit both MX and Choc sockets, I had to create a custom footprint that combined the separate footprints of both of the sockets, with some edits for compatability. Not only that, but I also had to create a completely new footprint for the LEDs, as there was no secure or reliable source for one from the online store I purchased them from. Nonetheless, this was a great chance to begin learning the intricacies of component footprint design, and luckily, both custom footprints worked flawlessly, including the LED footprint which required a rectangular cutout through the entire PCB shaped for the LED body to fit through. I was able to plan for enough tolerance for the LEDs to easily fit into the cutout without enough possible movement to affect PCB assembly.</h5><div align="center"> <img data-src="/assets/fightboard/v2_socket.PNG" width="200" data-proofer-ignore> <img data-src="/assets/fightboard/v2_led.PNG" width="200" data-proofer-ignore></div><h5> This project was a fantastic opportunity to test my soldering abilities, and I was definitely throwing myself into the deep end. I had little SMT soldering experience, and both the I/O expander and level shifter were much smaller than any part I had ever worked with. Luckily, with admittedly a few mistakes and retries, I was able to fully complete five full boards using both socket types and I now feel much more confident in my soldering skills.</h5><div align="center"> <img data-src="/assets/fightboard/v2_sizecomp.png" width="300" data-proofer-ignore><h6> Comparison of previous MCP model (left) to current model (right)</h6></div><h2 id="pictures-of-the-project"><span class="mr-2">Pictures of the Project</span><a href="#pictures-of-the-project" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><h5> The board without switches, with MX sockets</h5><p><img data-src="/assets/fightboard/v2_naked.jpg" width="600" data-proofer-ignore></p><h5> Circuit diagram in KiCAD</h5><p><img data-src="/assets/fightboard/v2_diagram.PNG" width="800" data-proofer-ignore></p><h5> PCB in KiCAD</h5><p><img data-src="/assets/fightboard/v2_pcb.PNG" width="800" data-proofer-ignore></p><h2 id="file-overview"><span class="mr-2">File Overview</span><a href="#file-overview" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><h4> <a href="https://github.com/cartex10/fightboard/blob/main/qmk_firmware/keyboards/fightboard/v2/matrix.c">matrix.c</a></h4><h5> This file has grown a lot in the upgrade, particularly in order to support optional input handling. Without getting too off topic, the keyboard has a software toggle to handle opposing directional inputs (holding up and down, the keyboard only uses the last pressed).</h5><h4> <a href="https://github.com/cartex10/fightboard/blob/main/qmk_firmware/keyboards/fightboard/v2/keymaps/default/keymap.c">keymap.c</a></h4><h5> Seven layers have added in order to support multiple players on the same firmware, or other games with different control schemes. An RGB LED matrix has also been added for the SK6812-MINIs.</h5><h4> <a href="https://github.com/cartex10/fightboard/blob/main/qmk_firmware/keyboards/fightboard/v2/v2.c">v2.c/h</a></h4><h5> This file handles core functions to the keyboard, such as the custom keycodes for layer selection and LED effects, EEPROM configuration/usage, and layer indication. Some functions have been taken from matrix.c for future compatability with the QMK online configurator.</h5><h2 id="completed-objectives"><span class="mr-2">Completed Objectives</span><a href="#completed-objectives" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><h5> v2, in relation to the design of the main board, is a complete success. Not only is every planned feature available and ready on the current PCB design, but it has been designed with future additions in mind, and some have already been successfully implemented! The upgrade exceeded intial expectations and ideas, and although the case is still work in progress, the main effort of the PCB is complete for this version.</h5><p><img data-src="/assets/fightboard/v2_overhead.jpg" width="600" data-proofer-ignore></p><h2 id="objectives-left-undone"><span class="mr-2">Objectives Left Undone</span><a href="#objectives-left-undone" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><h5> Ultimately, the main focus of the upgrade was the PCB design, with the case being a secondary objective, although still highly considered throughout the whole project. Still, the current iteration of the case is definitely not the final, and with certain improvements could bring the case up to the standard set by the PCB.</h5><h2 id="continuing-or-running-the-project"><span class="mr-2">Continuing or Running the Project</span><a href="#continuing-or-running-the-project" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><h5> After installing and setting up QMK using "qmk setup -b develop", setup the circuit following the KiCAD schematic, and flash the default keymap onto the RP2040.</h5></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/current-projects/'>Current Projects</a>, <a href='/categories/fightboard/'>FightBoard</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/fightboard/" class="post-tag no-text-decoration" >fightboard</a> <a href="/tags/current-projects/" class="post-tag no-text-decoration" >current-projects</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=FightBoard v2 - Cartex10&amp;url=https://cartex10.github.io/posts/fightboard-v2/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=FightBoard v2 - Cartex10&amp;u=https://cartex10.github.io/posts/fightboard-v2/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https://cartex10.github.io/posts/fightboard-v2/&amp;text=FightBoard v2 - Cartex10" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Welcome/">Welcome to my Site!</a><li><a href="/posts/fightboard-v2/">FightBoard v2</a><li><a href="/posts/vetcon/">VETCON Badge</a><li><a href="/posts/fightboard-v1/">FightBoard v1</a><li><a href="/posts/minibot/">MiniBot</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/current-projects/">current-projects</a> <a class="post-tag" href="/tags/previous-projects/">previous-projects</a> <a class="post-tag" href="/tags/rotombot/">rotombot</a> <a class="post-tag" href="/tags/fightboard/">fightboard</a> <a class="post-tag" href="/tags/minibot/">minibot</a> <a class="post-tag" href="/tags/blog-posts/">blog-posts</a> <a class="post-tag" href="/tags/important/">important</a> <a class="post-tag" href="/tags/overviews/">overviews</a> <a class="post-tag" href="/tags/robodachi/">robodachi</a> <a class="post-tag" href="/tags/vetcon-badge/">vetcon-badge</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/fightboard-v1/"><div class="card-body"> <em class="timeago small" data-ts="1666584000" > 2022-10-24 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>FightBoard v1</h3><div class="text-muted small"><p> ⌨️ FightBoard v1 🎮 GitHub · Project Logs AUG 2022 - SEPT 2022 Overview The FightBoard is a completely custom mechanical keyboard running QMK firmware, built mainly for use with Fi...</p></div></div></a></div><div class="card"> <a href="/posts/m_functions/"><div class="card-body"> <em class="timeago small" data-ts="1644728400" > 2022-02-13 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>m_functions.py</h3><div class="text-muted small"><p> 🤖 m_functions.py 🔎 Return · GitHub File Overview This file stores all of the functions that MiniBot needs to successfully function. The only non default libraries called are the Dis...</p></div></div></a></div><div class="card"> <a href="/posts/minibot/"><div class="card-body"> <em class="timeago small" data-ts="1644728400" > 2022-02-13 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>MiniBot</h3><div class="text-muted small"><p> 🤖 MiniBot 🔎 GitHub · Project Logs Feb 2022 - Overview MiniBot was born out of a purpose. That purpose is to help me remember to do all of the little things I need to do in order ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/fightboard-v1/" class="btn btn-outline-primary" prompt="Older"><p>FightBoard v1</p></a> <a href="/posts/Welcome/" class="btn btn-outline-primary" prompt="Newer"><p>Welcome to my Site!</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://github.com/cartex10">Carlos Ortiz</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/current-projects/">current-projects</a> <a class="post-tag" href="/tags/previous-projects/">previous-projects</a> <a class="post-tag" href="/tags/rotombot/">rotombot</a> <a class="post-tag" href="/tags/fightboard/">fightboard</a> <a class="post-tag" href="/tags/minibot/">minibot</a> <a class="post-tag" href="/tags/blog-posts/">blog-posts</a> <a class="post-tag" href="/tags/important/">important</a> <a class="post-tag" href="/tags/overviews/">overviews</a> <a class="post-tag" href="/tags/robodachi/">robodachi</a> <a class="post-tag" href="/tags/vetcon-badge/">vetcon-badge</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
